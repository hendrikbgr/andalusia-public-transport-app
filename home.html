<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CTAN Bus Tracker</title>
  <link rel="stylesheet" href="src/style.css?v=9" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#1a6fdb" />
  <link rel="apple-touch-icon" href="icons/icon-180.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16.png" />
</head>
<body>
  <div id="app">
    <header class="app-header">
      <div class="header-inner">
        <span class="app-icon">ğŸšŒ</span>
        <h1 id="app-title">Bus Tracker</h1>
        <a href="settings.html" class="settings-btn" id="settings-btn" title="Settings">âš™ï¸</a>
        <button class="lang-toggle" id="lang-toggle" title="Switch language">EN</button>
      </div>
    </header>

    <main class="main-content home-content">
      <div class="home-greeting" id="home-greeting">Good morning</div>

      <!-- Saved stops section -->
      <div class="saved-stops-section hidden" id="saved-stops-section">
        <div class="home-section-label" id="saved-stops-label">Saved Stops</div>
        <div id="saved-stops-list"></div>
      </div>

      <!-- Feature cards -->
      <div class="home-section-label" id="home-features-label">Features</div>
      <div class="home-card-grid">

        <!-- Live departures -->
        <a href="index.html" class="home-feature-card">
          <div class="home-feature-icon">ğŸš</div>
          <div class="home-feature-body">
            <div class="home-feature-title" id="feat-timetable">Live Departures</div>
            <div class="home-feature-desc" id="feat-timetable-desc">See real-time buses at any stop</div>
          </div>
          <span class="card-arrow">â€º</span>
        </a>

        <!-- Line timetables -->
        <a href="linetimetable.html" class="home-feature-card">
          <div class="home-feature-icon">ğŸ“‹</div>
          <div class="home-feature-body">
            <div class="home-feature-title" id="feat-linetimetable">Line Timetables</div>
            <div class="home-feature-desc" id="feat-linetimetable-desc">Search full schedules by line</div>
          </div>
          <span class="card-arrow">â€º</span>
        </a>

        <!-- Route planner -->
        <a href="planner.html" class="home-feature-card">
          <div class="home-feature-icon">ğŸ—ºï¸</div>
          <div class="home-feature-body">
            <div class="home-feature-title" id="feat-planner">Route Planner</div>
            <div class="home-feature-desc" id="feat-planner-desc">Find buses between two towns</div>
          </div>
          <span class="card-arrow">â€º</span>
        </a>

        <!-- Stop map -->
        <a href="map.html" class="home-feature-card">
          <div class="home-feature-icon">ğŸ“</div>
          <div class="home-feature-body">
            <div class="home-feature-title" id="feat-map">Stop Map</div>
            <div class="home-feature-desc" id="feat-map-desc">Browse all stops on a map</div>
          </div>
          <span class="card-arrow">â€º</span>
        </a>

      </div>

      <div class="home-version" id="home-version">v4</div>
    </main>
  </div>

  <!-- PWA install banner -->
  <div id="pwa-banner" class="pwa-banner hidden" role="region" aria-label="Install app">
    <span id="pwa-banner-text">Install for quick access</span>
    <div class="pwa-banner-actions">
      <button id="pwa-install-btn" class="pwa-install-btn">Install</button>
      <button id="pwa-dismiss-btn" class="pwa-dismiss-btn">âœ• Not now</button>
    </div>
  </div>

  <!-- App update banner -->
  <div id="update-banner" class="update-banner hidden" role="region" aria-label="App update">
    <span id="update-banner-text">Update available</span>
    <div class="pwa-banner-actions">
      <button id="update-reload-btn" class="pwa-install-btn" id="update-reload-btn">Reload</button>
      <button id="update-dismiss-btn" class="pwa-dismiss-btn">âœ•</button>
    </div>
  </div>

  <script src="src/js/i18n.js?v=2"></script>
  <script src="src/js/home.js?v=5"></script>
  <!-- SW registration handled by home.js (initUpdateBanner) so it can watch for updates -->
</body>
</html>
